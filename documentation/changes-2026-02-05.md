# Changes Summary (2026-02-05)

## Overview
This update improves media storage organization and S3 reliability.

## Media Library: model-based storage paths
- Added a custom path generator that places media under model-specific directories using UUIDs.
- Rooms now store media under `rooms/{uuid}/` and venues under `venues/{uuid}/`.
- Conversions and responsive images are stored under `conversions/` and `responsive/` subfolders.

**New file**
- [app/MediaLibrary/PathGenerators/ModelTypePathGenerator.php](app/MediaLibrary/PathGenerators/ModelTypePathGenerator.php)

**Config updates**
- Registered the custom path generator for `Room` and `Venue` models in [config/media-library.php](config/media-library.php).

## S3 filesystem reliability settings
- Added S3 HTTP timeout and SSL verification settings to improve network stability.
- Set S3 disk to throw exceptions on errors for better visibility during failures.
- Removed the per-disk `visibility` setting from S3 (defaults to Laravel/driver behavior).

**Config updates**
- Updated S3 disk settings in [config/filesystems.php](config/filesystems.php).

## Environment variables introduced
Ensure these are set if you need to override defaults:
- `AWS_CONNECT_TIMEOUT` (default: 5 seconds)
- `AWS_TIMEOUT` (default: 10 seconds)
- `AWS_HTTP_VERIFY` (default: true)
- `MEDIA_DISK` (default: public)

## Notes
- Existing media stored on previous paths will not be migrated automatically. If needed, run a manual migration to align with the new folder structure.
